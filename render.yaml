services:
  - type: web
    name: tagio-relay-server
    env: rust
    buildCommand: cd standalone_server && cargo build --release --bin http_tunnel_server
    startCommand: ./standalone_server/target/release/http_tunnel_server --log-level info
    region: frankfurt
    plan: starter
    healthCheckPath: /status
    # The following envVars are used for configuration
    envVars:
      - key: AUTH_TOKEN
        sync: false # Set to false to allow custom values per environment
      - key: RUST_LOG
        value: info
      - key: SERVER_NAME
        value: tagio-server.onrender.com
    
    # Render automatically sets PORT=10000 for web services
    autoDeploy: true
    # Scaling settings (Pro+ plans only)
    scaling:
      minInstances: 1
      maxInstances: 1
    # HTTP tunnel server handles its own HTTP requests
    domains:
      - tagio-server.onrender.com 